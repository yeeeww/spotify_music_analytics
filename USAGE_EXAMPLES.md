# Spotify Music Analytics 사용 예시

이 문서는 Spotify Music Analytics의 다양한 기능과 사용 예시를 설명합니다.

---

## 📊 1. 데이터 탐색 페이지

### 기능
- 데이터베이스 테이블 구조 확인
- 데이터 미리보기
- 기본 통계 확인
- 간단한 시각화

### 사용 예시

#### 1.1 테이블 데이터 미리보기
1. 사이드바에서 테이블 선택 (예: `tracks`)
2. "📋 데이터 미리보기" 탭 선택
3. 슬라이더로 표시할 행 수 조정
4. 필요시 CSV로 다운로드

#### 1.2 스키마 정보 확인
1. "🔍 스키마 정보" 탭 선택
2. 컬럼명, 데이터 타입, 제약조건 확인
3. tracks 테이블의 경우 주요 컬럼 설명 참고

#### 1.3 기본 통계 확인
1. "📊 기본 통계" 탭 선택
2. 숫자형 컬럼 통계 확인 (평균, 표준편차, 분위수 등)
3. 문자형 컬럼의 빈도수 확인

#### 1.4 시각화
1. "📈 시각화" 탭 선택
2. 시각화 타입 선택 (히스토그램, 박스 플롯, 막대 그래프)
3. 컬럼 선택하여 차트 생성

---

## 💬 2. 자연어 질의 페이지

### 기능
- 한국어 질문을 SQL로 자동 변환
- 쿼리 실행 및 결과 표시
- AI 기반 결과 분석
- 자동 시각화

### 사용 예시

#### 2.1 기본 질의

**예시 1: 인기 장르 찾기**
```
질문: "가장 인기 있는 장르 TOP 10은?"
```

**생성되는 SQL:**
```sql
SELECT track_genre, AVG(popularity) as avg_popularity, COUNT(*) as track_count
FROM tracks
GROUP BY track_genre
ORDER BY avg_popularity DESC
LIMIT 10
```

**결과:**
- 장르별 평균 인기도 테이블
- 막대 그래프 자동 생성
- AI 분석: "pop, k-pop, latin 장르가 가장 높은 인기도를 보입니다..."

---

**예시 2: 특정 조건의 곡 찾기**
```
질문: "댄스 지수가 0.8 이상인 곡은?"
```

**생성되는 SQL:**
```sql
SELECT track_name, artists, danceability, popularity
FROM tracks
WHERE danceability >= 0.8
ORDER BY danceability DESC
LIMIT 100
```

**결과:**
- 댄스 지수가 높은 곡 목록
- 산점도 또는 히스토그램
- AI 분석: "댄스 지수가 높은 곡들의 특징..."

---

**예시 3: 장르별 비교**
```
질문: "장르별 평균 템포를 보여줘"
```

**생성되는 SQL:**
```sql
SELECT track_genre, AVG(tempo) as avg_tempo, COUNT(*) as track_count
FROM tracks
GROUP BY track_genre
ORDER BY avg_tempo DESC
```

**결과:**
- 장르별 평균 템포 테이블
- 막대 그래프
- AI 분석: "EDM과 techno 장르가 가장 빠른 템포를 보입니다..."

---

**예시 4: 상관관계 분석**
```
질문: "에너지와 댄스 지수의 상관관계는?"
```

**생성되는 SQL:**
```sql
SELECT energy, danceability, popularity
FROM tracks
WHERE energy IS NOT NULL AND danceability IS NOT NULL
LIMIT 5000
```

**결과:**
- 산점도 (energy vs danceability)
- 상관계수 계산
- AI 분석: "에너지와 댄스 지수는 양의 상관관계를 보입니다..."

---

#### 2.2 고급 질의

**예시 5: 복잡한 조건**
```
질문: "인기도가 80 이상이고 에너지가 0.7 이상인 곡 중 템포가 빠른 순으로 20개"
```

**예시 6: 집계 함수**
```
질문: "각 장르별로 가장 인기 있는 곡 하나씩 보여줘"
```

**예시 7: 시간 관련**
```
질문: "5분 이상인 곡들의 평균 인기도는?"
```

---

#### 2.3 SQL 수정 및 재실행

1. "🔍 SQL" 탭 선택
2. 생성된 SQL 확인
3. 필요시 SQL 수정
4. "🔄 수정된 쿼리 실행" 버튼 클릭

**수정 예시:**
```sql
-- 원본
SELECT track_genre, AVG(popularity) as avg_popularity
FROM tracks
GROUP BY track_genre
LIMIT 10

-- 수정 (조건 추가)
SELECT track_genre, AVG(popularity) as avg_popularity, COUNT(*) as count
FROM tracks
WHERE popularity > 50
GROUP BY track_genre
HAVING count > 100
ORDER BY avg_popularity DESC
LIMIT 20
```

---

## 📈 3. 분석 리포트 페이지

### 기능
- 사전 정의된 분석 리포트
- 커스텀 분석 설정
- 리포트 다운로드

### 사용 예시

#### 3.1 전체 데이터 개요

**포함 내용:**
- 총 트랙, 아티스트, 장르 수
- 인기도 분포 히스토그램
- 음악 특성 박스 플롯
- 특성 간 상관관계 히트맵

**사용법:**
1. 사이드바에서 "전체 데이터 개요" 선택
2. 자동으로 모든 분석 실행
3. 스크롤하며 각 섹션 확인

---

#### 3.2 장르 분석

**포함 내용:**
- 장르별 트랙 수 TOP 20
- 장르별 평균 인기도
- 선택한 장르들의 음악 특성 비교

**사용법:**
1. 사이드바에서 "장르 분석" 선택
2. 비교할 장르 선택 (최대 5개)
3. 장르별 특성 비교 차트 확인

**예시 시나리오:**
```
목표: "pop, rock, jazz, classical, edm 장르의 특성 비교"

결과:
- pop: 높은 댄스 지수, 중간 에너지
- rock: 높은 에너지, 낮은 댄스 지수
- jazz: 높은 어쿠스틱, 낮은 에너지
- classical: 매우 높은 어쿠스틱, 높은 악기 연주
- edm: 매우 높은 에너지, 높은 댄스 지수
```

---

#### 3.3 음악 특성 분석

**포함 내용:**
- 선택한 특성의 분포
- 인기도와의 상관관계
- 산점도 및 상관계수

**사용법:**
1. 사이드바에서 "음악 특성 분석" 선택
2. 분석할 특성 선택 (예: danceability)
3. 분포, 박스 플롯, 산점도 확인
4. 상관계수 확인

**특성별 인사이트 예시:**

| 특성 | 인기도와의 관계 | 해석 |
|------|----------------|------|
| danceability | 약한 양의 상관 | 댄스 지수가 높을수록 약간 더 인기 |
| energy | 약한 양의 상관 | 에너지가 높을수록 약간 더 인기 |
| valence | 거의 무관 | 긍정도는 인기도와 무관 |
| acousticness | 약한 음의 상관 | 어쿠스틱할수록 약간 덜 인기 |
| tempo | 거의 무관 | 템포는 인기도와 무관 |

---

#### 3.4 인기도 분석

**포함 내용:**
- 인기도 구간별 트랙 수
- 인기 곡 TOP 20
- 인기도 구간별 평균 음악 특성

**사용법:**
1. 사이드바에서 "인기도 분석" 선택
2. 인기도 구간별 분포 확인
3. TOP 20 곡 목록 확인
4. 인기도에 따른 특성 변화 확인

**인사이트 예시:**
```
발견:
- Very High (80-100): 전체의 5%
- High (60-79): 전체의 15%
- Medium (40-59): 전체의 30%
- Low (20-39): 전체의 35%
- Very Low (0-19): 전체의 15%

특징:
- 인기도가 높을수록 댄스 지수가 약간 높음
- 인기도가 높을수록 에너지가 약간 높음
- 템포는 인기도와 무관
```

---

#### 3.5 커스텀 분석

**기능:**
- X축, Y축 자유 선택
- 차트 타입 선택
- 필터 적용
- AI 분석 옵션

**사용 예시:**

**시나리오 1: 장르별 평균 에너지 비교**
```
설정:
- X축: track_genre (카테고리)
- Y축: energy (숫자)
- 차트: 막대 그래프
- 필터: 인기도 >= 50

결과:
- 장르별 평균 에너지 막대 그래프
- TOP 20 장르만 표시
- AI 분석으로 인사이트 확인
```

**시나리오 2: 에너지와 인기도의 관계**
```
설정:
- X축: energy (숫자)
- Y축: popularity (숫자)
- 차트: 산점도
- 필터: rock 장르만

결과:
- rock 장르의 에너지 vs 인기도 산점도
- 상관관계 확인
```

---

## 🎯 실전 활용 시나리오

### 시나리오 1: 플레이리스트 큐레이션

**목표:** 운동용 플레이리스트를 위한 곡 찾기

**단계:**
1. 자연어 질의 페이지에서 질문:
   ```
   "에너지가 0.8 이상이고 템포가 120 이상인 곡 중 인기 있는 곡 50개"
   ```

2. 결과 확인 및 CSV 다운로드

3. 추가 분석:
   ```
   "이 중에서 댄스 지수도 0.7 이상인 곡은?"
   ```

---

### 시나리오 2: 장르 트렌드 분석

**목표:** 인기 있는 장르의 특징 파악

**단계:**
1. 분석 리포트 > 장르 분석 선택

2. 인기도 높은 장르 5개 선택

3. 음악 특성 비교

4. 인사이트:
   - 인기 장르는 댄스 지수가 높음
   - 에너지는 중간~높음
   - 템포는 다양함

---

### 시나리오 3: 아티스트 분석

**목표:** 특정 아티스트의 음악 스타일 분석

**단계:**
1. 자연어 질의:
   ```
   "BTS의 모든 곡의 평균 음악 특성을 보여줘"
   ```

2. 비교 분석:
   ```
   "BTS와 BLACKPINK의 평균 음악 특성을 비교해줘"
   ```

3. 결과 해석 및 리포트 생성

---

## 💡 팁과 트릭

### 효과적인 질문 작성법

**좋은 질문:**
- "가장 인기 있는 장르 TOP 10은?"
- "댄스 지수가 0.8 이상인 곡은?"
- "장르별 평균 템포를 보여줘"

**피해야 할 질문:**
- "좋은 곡 알려줘" (너무 모호함)
- "모든 데이터 보여줘" (너무 광범위함)
- "이 곡 어때?" (데이터에 없을 수 있음)

### 성능 최적화

1. **대용량 쿼리 제한:**
   - LIMIT 사용하여 결과 제한
   - 필요한 컬럼만 SELECT

2. **필터 활용:**
   - WHERE 절로 데이터 필터링
   - 인덱스가 있는 컬럼 활용 (track_genre, popularity)

3. **시각화 최적화:**
   - 데이터가 많으면 샘플링
   - TOP N만 표시

---

## 📚 추가 학습 자료

### SQL 기초
- [W3Schools SQL Tutorial](https://www.w3schools.com/sql/)
- [SQLite 공식 문서](https://www.sqlite.org/docs.html)

### 데이터 분석
- [Pandas 문서](https://pandas.pydata.org/docs/)
- [Plotly 문서](https://plotly.com/python/)

### Spotify 음악 특성
- [Spotify Audio Features](https://developer.spotify.com/documentation/web-api/reference/get-audio-features)

---

**Happy Analyzing! 🎵**

